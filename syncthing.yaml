apiVersion: v1
kind: Pod
metadata:
  annotations:
    io.containers.autoupdate/syncthing: registry
  labels:
    app: syncthing
  name: syncthing
spec:
  hostNetwork: true
  enableServiceLinks: false
  hostname: syncthing
  restartPolicy: OnFailure
  containers:
    - name: syncthing
      image: docker.io/syncthing/syncthing:latest
      ports:
        - containerPort: 8384
          hostPort: 8384
        - containerPort: 22000
          hostPort: 22000
        - containerPort: 21027
          hostPort: 21027
      securityContext:
        capabilities:
          drop:
            - CAP_MKNOD
            - CAP_NET_RAW
            - CAP_AUDIT_WRITE
      volumeMounts:
        - mountPath: /var/syncthing:z
          name: nextcloud_data
  volumes:
    - hostPath:
        path: /mnt/nextcloud_data/j.p.hagedoorn/files:z
        type: Directory
      name: nextcloud_data
status: {}
